TDAT:     public void purgeMapEvents(int lastKnownIndex) {
      // Note that the sync is first on fromEventId and then on allMapEvents
      synchronized (fromEventId) {
        synchronized (allMapEvents) {
          int index = 0;
          if (allMapEvents.size() > lastKnownIndex) {
            fromEventId.set(lastKnownIndex);
            allMapEvents = allMapEvents.subList(0, lastKnownIndex);
          }
        }
      }
    }

COM:purges map events up until a specified index while synchronizing on two objects